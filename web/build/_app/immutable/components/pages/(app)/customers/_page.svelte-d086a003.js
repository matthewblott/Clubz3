import{S as U,i as V,s as X,Y as J,k as v,q as I,a as P,x as L,e as K,l as E,m as w,r as N,h,c as A,y as O,b as H,I as i,z as R,Z as x,f as D,t as B,A as W,u as z,C as S,n as q,g as tt,d as et,W as ot}from"../../../../chunks/index-867ab049.js";import{E as rt}from"../../../../chunks/edit-058cb14e.js";import{P as at,a as lt}from"../../../../chunks/Pager-bc17a407.js";import{g as nt}from"../../../../chunks/navigation-8c5881c7.js";import{C as st}from"../../../../chunks/customer-e7fbd6db.js";import"../../../../chunks/index-4d8f42c1.js";async function ct(s,t){return await st.fetchPaged(s,t)}function M(s,t,r){const e=s.slice();return e[5]=t[r].CustomerId,e[6]=t[r].CompanyName,e}function ft(s){let t=s[9]+"",r;return{c(){r=I(t)},l(e){r=N(e,t)},m(e,n){H(e,r,n)},p(e,n){n&1&&t!==(t=e[9]+"")&&z(r,t)},i:S,o:S,d(e){e&&h(r)}}}function ut(s){let t,r,e,n,d,m,p,g,f,o,l,b,T,y;l=new lt({});let $=s[4].resource,a=[];for(let u=0;u<$.length;u+=1)a[u]=Q(M(s,$,u));const k=u=>B(a[u],1,1,()=>{a[u]=null});return{c(){t=v("table"),r=v("thead"),e=v("th"),n=I("Id"),d=P(),m=v("th"),p=I("Name"),g=P(),f=v("th"),o=v("a"),L(l.$$.fragment),b=P(),T=v("tbody");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=E(u,"TABLE",{role:!0});var _=w(t);r=E(_,"THEAD",{});var c=w(r);e=E(c,"TH",{scope:!0});var C=w(e);n=N(C,"Id"),C.forEach(h),d=A(c),m=E(c,"TH",{scope:!0});var Z=w(m);p=N(Z,"Name"),Z.forEach(h),g=A(c),f=E(c,"TH",{});var j=w(f);o=E(j,"A",{href:!0});var F=w(o);O(l.$$.fragment,F),F.forEach(h),j.forEach(h),c.forEach(h),b=A(_),T=E(_,"TBODY",{});var G=w(T);for(let Y=0;Y<a.length;Y+=1)a[Y].l(G);G.forEach(h),_.forEach(h),this.h()},h(){q(e,"scope","col"),q(m,"scope","col"),q(o,"href","/customers/new"),q(t,"role","grid")},m(u,_){H(u,t,_),i(t,r),i(r,e),i(e,n),i(r,d),i(r,m),i(m,p),i(r,g),i(r,f),i(f,o),R(l,o,null),i(t,b),i(t,T);for(let c=0;c<a.length;c+=1)a[c].m(T,null);y=!0},p(u,_){if(_&1){$=u[4].resource;let c;for(c=0;c<$.length;c+=1){const C=M(u,$,c);a[c]?(a[c].p(C,_),D(a[c],1)):(a[c]=Q(C),a[c].c(),D(a[c],1),a[c].m(T,null))}for(tt(),c=$.length;c<a.length;c+=1)k(c);et()}},i(u){if(!y){D(l.$$.fragment,u);for(let _=0;_<$.length;_+=1)D(a[_]);y=!0}},o(u){B(l.$$.fragment,u),a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)B(a[_]);y=!1},d(u){u&&h(t),W(l),ot(a,u)}}}function Q(s){let t,r,e=s[5]+"",n,d,m,p=s[6]+"",g,f,o,l,b,T,y,$;return b=new rt({}),{c(){t=v("tr"),r=v("th"),n=I(e),d=P(),m=v("td"),g=I(p),f=P(),o=v("td"),l=v("a"),L(b.$$.fragment),y=P(),this.h()},l(a){t=E(a,"TR",{});var k=w(t);r=E(k,"TH",{scope:!0});var u=w(r);n=N(u,e),u.forEach(h),d=A(k),m=E(k,"TD",{});var _=w(m);g=N(_,p),_.forEach(h),f=A(k),o=E(k,"TD",{});var c=w(o);l=E(c,"A",{href:!0});var C=w(l);O(b.$$.fragment,C),C.forEach(h),c.forEach(h),y=A(k),k.forEach(h),this.h()},h(){q(r,"scope","row"),q(l,"href",T="/customers/"+s[5])},m(a,k){H(a,t,k),i(t,r),i(r,n),i(t,d),i(t,m),i(m,g),i(t,f),i(t,o),i(o,l),R(b,l,null),i(t,y),$=!0},p(a,k){(!$||k&1)&&e!==(e=a[5]+"")&&z(n,e),(!$||k&1)&&p!==(p=a[6]+"")&&z(g,p),(!$||k&1&&T!==(T="/customers/"+a[5]))&&q(l,"href",T)},i(a){$||(D(b.$$.fragment,a),$=!0)},o(a){B(b.$$.fragment,a),$=!1},d(a){a&&h(t),W(b)}}}function it(s){let t,r;return{c(){t=v("p"),r=I("waiting for the promise to resolve...")},l(e){t=E(e,"P",{});var n=w(t);r=N(n,"waiting for the promise to resolve..."),n.forEach(h)},m(e,n){H(e,t,n),i(t,r)},p:S,i:S,o:S,d(e){e&&h(t)}}}function ht(s){let t,r,e,n,d,m,p,g;n=new at({props:{limit:10,count:s[1]}}),n.$on("next",s[2]);let f={ctx:s,current:null,token:null,hasCatch:!0,pending:it,then:ut,catch:ft,value:4,error:9,blocks:[,,,]};return J(p=s[0],f),{c(){t=v("h1"),r=I("Customers"),e=P(),L(n.$$.fragment),d=P(),m=K(),f.block.c()},l(o){t=E(o,"H1",{});var l=w(t);r=N(l,"Customers"),l.forEach(h),e=A(o),O(n.$$.fragment,o),d=A(o),m=K(),f.block.l(o)},m(o,l){H(o,t,l),i(t,r),H(o,e,l),R(n,o,l),H(o,d,l),H(o,m,l),f.block.m(o,f.anchor=l),f.mount=()=>m.parentNode,f.anchor=m,g=!0},p(o,[l]){s=o;const b={};l&2&&(b.count=s[1]),n.$set(b),f.ctx=s,l&1&&p!==(p=s[0])&&J(p,f)||x(f,s,l)},i(o){g||(D(n.$$.fragment,o),D(f.block),g=!0)},o(o){B(n.$$.fragment,o);for(let l=0;l<3;l+=1){const b=f.blocks[l];B(b)}g=!1},d(o){o&&h(t),o&&h(e),W(n,o),o&&h(d),o&&h(m),f.block.d(o),f.token=null,f=null}}}function mt(s,t,r){let e,n,{data:d}=t;const m=async p=>{const g=p.detail.offset,f=10,o=`?limit=${f}&offset=${g}`;nt(o),r(0,e=await ct(f,g)),r(1,n=e.meta.count)};return s.$$set=p=>{"data"in p&&r(3,d=p.data)},s.$$.update=()=>{s.$$.dirty&8&&r(0,e=d),s.$$.dirty&1&&r(1,n=e.meta.count)},[e,n,m,d]}class kt extends U{constructor(t){super(),V(this,t,mt,ht,X,{data:3})}}export{kt as default};
